---
title: TIP
summary: 介绍 SCP-079-TIP 的使用方法
type: docs
---

# TIP

本文介绍如何使用 SCP-079-TIP 的机器人实例。

---

## 简介

本机器人提供入群欢迎、离题提醒、关键词回复、取消或保持频道置顶消息、绑定入群频道的功能。其中，自定义关键词回复可支持多种模式，并支持采取自选触发关键词后的操作。

---

## 所需权限

机器人若需正常工作，则在群组中需要如图所示的权限，权限缺失可能将导致机器人退出群组：

> *PERMISSONS：*
>
> ![PERMISSONS](/images/tip/permissions.png)

---

## 群组设置

以下介绍如何在群组中更改机器人的设置。

---

### 按钮设置

管理员在群内发送：

`/config tip`

即可通过 [SCP-079-CONFIG](https://scp-079.org/config/) 方便地调整机器人设置，机器人将回报前往设置的链接，5 分钟内设置将被锁定，无法再次更改。请记得在完成设置后点击「提交」按钮。

![SCP-079-TIP 的设置界面](/images/tip/config.png)

**过审欢迎：** 开启后，如果 CAPTCHA 机器人在群组中，只有用户通过入群验证后才发送欢迎消息。默认开启。

**非回复欢迎：** 开启后，机器人将不会以回复入群消息的形式来欢迎新入群用户。默认关闭。

**无痕模式：** 开启后，机器人所发送的提示都会定时销毁。默认开启。

**OT 警告：** 开启后，如果群组设置了 OT 警告内容（机器人内置了默认 OT 警告内容），将会响应 /ot 命令。按钮关闭后，将关闭 OT 警告功能。默认开启。

**RM 警告：** rm 笑话警告。如果群组设置了 RM 警告内容（机器人内置了默认 RM 警容），则会对 rm 类笑话响应。按钮关闭后，将关闭 RM 警告功能。默认关闭。

**欢迎消息：** 开启后，如果群组设置了欢迎内容（机器人内置了默认欢迎内容），将会在新成员入群发送入群欢迎。按钮关闭后，将关闭入群欢迎功能。当 CAPTCHA 在群组中时，TIP 会确保用户通过入群审核后才发送欢迎消息。默认开启。

**关键词提示：** 开启后，如果群组设置了关键词提示内容，则会针对关键词回复内容。按钮关闭后，将关闭关键词提示功能。默认开启。

**放行白名单：** 开启后，如果群组设置的关键词触发行为包括删除、移除、禁言、封禁等任意一个影响用户消息和权限的功能，将不对项目中全局白名单的用户触发此关键词。默认关闭。

**平等模式：** 机器人默认对管理员的关键词触发是区别对待且有触发条件的：要求全匹配，而且是管理员用全匹配关键词回复某个人才会触发——管理员的关键词会被自动删除，被回复的人会被回复预设的消息。而开启「平等模式」后，机器人对管理员的关键触发没有特殊条件，并且会尝试执行所有设置的关键词触发行为。

**取消置顶：** 开启后，将取消频道在群组中的置顶。按钮关闭后，将不再取消。

**保持置顶：** 单纯使用按钮开启无效果，需在群内使用命令保持某条消息为置顶，避免被频道置顶替代。按钮关闭后，将不再保持。

**入群频道：** 单纯使用按钮开启无效果，需在群内使用命令绑定某频道。按钮关闭后，将取消绑定。

**每日重发入群链接：** 注意：即使不重发入群链接，机器人也会在原消息中定时更换、刷新入群链接。重发链接模式开启后，如果绑定了入群频道，将在每日都在该频道中回收入群链接消息，并发送一条新的消息。默认关闭。

---

### 命令设置

除使用 `/config tip` 外，管理员也可以通过 `/config_tip` 命令在群组中手动调整设置：

- `/config_tip 功能代号 on|off`：开启或关闭某功能 / 模式

功能代号如下：

- `captcha`：过审欢迎 
- `alone`：非回复欢迎
- `clean`：无痕模式
- `ot`：OT 警告
- `rm`：RM 警告
- `welcome`：入群欢迎
- `keyword`：关键词提示
- `white`：放行白名单
- `equal`：平等模式
- `cancel`：取消置顶
- `hold`：保持置顶
- `channel`：入群频道
- `resend`：每日重发入群链接

例如开启取消置顶功能：

`/config_tip cancel on`

---

## 设置自定义内容

本节介绍如何使用 `/ot`、`/rm`、`/welcome` 命令设置自定义内容。

---

### 格式规约

您可以通过命令自定义 OT 警告消息、RM 警告消息、入群欢迎消息的内容：

- 当设定消息内容的样式时（链接、加粗、斜体、代码块），请内容遵从 HTML 格式，请见：<https://docs.pyrogram.org/topics/text-formatting#html-style>
- 在内容尾部，使用一行 6 个 `+` 号作为分隔线，来区分正文与按钮部分。在分隔线后方，每行都将代表一个按钮配置：
    - 对于每个按钮配置，请使用双竖线 `||` 分隔按钮文字（前）和按钮链接（后），最多可设置共 6 个按钮。
    - 「按钮文字」不要超过 64 个字节长度
    - 「按钮链接」可使用「关键词编号」替代。用户点击按钮后，将发送预设的关键词中的回复内容。
    - 「按钮链接」可以使用 `$pinned_message` 替代，代表置顶消息的链接。请注意：机器人不会将绑定频道的置顶消息当作置顶消息，也请在使用 `$pinned_message` 前，确保您重新置顶了待置顶的消息，这样机器人才会记录该置顶消息的 ID。

只有在针对 `/welcome` 命令时，自定义内容中才可以添加与用户相关的代号：

- `$mention_id`：此代号将自动被替换为用户的 ID 并 @ 该用户
- `$mention_name`：此代号将自动被替换为用户昵称 并 @ 该用户
- `$code_id`：代号将自动被替换为用户的 ID
- `$code_name`：此代号将自动被替换为用户的昵称

---

### 设置与示例

可利用的命令：

- `/ot`：此命令用于自定义 OT 警告
- `/rm`：此命令用于自定义 RM 警告
- `/welcome`：此命令用于自定义入群欢迎消息

用法参考：

```bash
/welcome 欢迎消息的文字内容
++++++
按钮文字甲 || 按钮链接甲
按钮文字乙 || 按钮链接乙
```

示例：

> 自定义用户入群时的欢迎消息：
>
> ```bash
> /welcome 你好，$mention_name ，欢迎来玩！
> ++++++
> 了解我们 || https://scp-079.org/readme/
> 查看教程 || https://scp-079.org/bots/
> 申请使用 || https://scp-079.org/ApplyForUse/
> 讨论群组 || https://t.me/SCP_079_CHAT
> ```
>
> 本示例对应的效果：
>
> ![示例效果](/images/tip/welcome.png)

> 自定义离题内容警告：
>
> ```bash
> /ot 离题内容请适度，欢迎加入 <a href="https://t.me">我们的水群</a> 来玩
> ```
>
> 本示例对应的效果：
>
> ![示例效果](/images/tip/ot.png)

---

### 提示命令使用方法

- 当开启入群欢迎功能后，机器人将自动发送入群欢迎消息。群管理还可以用 `/welcome` 命令手动回复某人，进行手动欢迎或测试。
- 当开启 RM 警告功能后，机器人将自动检测 rm 命令类笑话，并对该笑话回复群组自定义的内容。群管理还可以发送 `/rm` 命令，进行手动警告。
- 当开启 OT 警告功能后，群管理可以发送 `/ot` 命令，进行手动警告。


{{< hint info >}}
注意事项：

为避免同一个用户反复入群，反复触发入群欢迎消息，机器人通常会在 24 小时内只欢迎同一用户一次，除非管理员手动使用 `/welcome` 命令回复某人。
{{< /hint >}}

---

### 查看设置与统计

在群内使用 `/show 类别代号`，可以获取相应提示的原始设置和统计数据，例如：

```bash
/show welcome
```

如需显示上一次的设置（非当前设置），请附加 `old` 参数，例如：

```bash
/show welcome old
```

---

## 设置自定义关键词

介绍如何设置自定义关键词，以及说明自定义关键词的触发流程。

{{< hint danger >}}
注意：

设置自定义关键词需要与机器人进行私聊。在设计原则上，私聊的设置无法得到「操作可查原则」的保证。因此，若群组开启自定义关键词，则认为群组主动放弃这部分设置的公开可查性，因此机器人将对 `/keywords`、`/keyword`、`/kws` 命令做证据留存，转发至 COMPROMISE 频道中。
{{< /hint >}}

---

### 自定义关键词触发流程

**当该关键词的触发行为中只包含「回复」操作时：** 机器人将会用预设内容回复该用户。为避免恶意刷屏，同一用户在 10 分钟内无法重复触发同一类别的关键词回复。

**当该关键词的触发行为中包含「删除」、「移除」、「禁言」、「封禁」操作时：** 如果触发行为含「回复」，则机器人将会用预设内容回复该用户。同一用户在 10 分钟内再次触发该类关键词时，只会执行「删除」消息的操作。

---

### 启用自定义关键词

**进行设置前，应先启用自定义关键词功能**，管理员在群组中发送：`/config_tip keyword on`

---

### 请求设置会话

管理员在群组中发送：`/kws`

{{< hint danger >}}
执行此命令后，将视为群组已主动放弃「操作可查原则」提供的保护。
{{< /hint >}}

机器人将回报前往设置的按钮：

> *`/kws` 命令的回应：*
>
> ![/kws 的回应](/images/tip/kws.png)

点击回报的按钮与机器人展开私聊，如图：

> 
>
> ![通过按钮 /start](/images/tip/kws-start.png)

该设置会话将维持 `600` 秒，期间该群组不接受其他管理员的自定义关键词设置。若在本次会话中操作超时，则机器人不再会有任何响应。

---

### 添加关键词

添加关键词时，命令为 `/add`，请使用一行三个加号 `+++` 来分隔「关键词设置区域」、「回复内容设置区域」、「其他可选设置区域」。一个示例：

```bash
/add 我是关键词
+++
我是需要回复的内容
```

上面的例子中，我们只设置了一个关键词，并且我们的回复内容不带按钮，而且没有附加任何可选设置，因此机器人将采用默认设置。这是一个极其简单的设置，那么接下来看看如何进阶使用该命令：


```bash
/add 关键词甲 || 关键词乙
+++
这是一个关键词回复的示例消息。
++++++
按钮文字甲 || 按钮链接甲
按钮文字乙 || 按钮链接乙
+++
这里填写一些触发模式的代号
+++
这里填写一些触发操作的代号
+++
这里填写触发对象的代号
+++
这里填写整数，代表消息自毁时间
```

> *解析 `/add` 命令：*
> 
> ![解析 /add 命令](/images/tip/kws-add-explain.png)

**关键词设置区域：** 此部分为必填项。

- 使用两条竖线 `||` 分隔同义的关键词。
- 如需特别指定某个关键词以全匹配模式触发，可使用双花括号包裹关键词，例如： `{{关键词}}` 。 

**回复内容设置区域：** 此部分为必填项。

- 当设定消息内容的样式时（链接、加粗、斜体、代码块），请内容遵从 HTML 格式，请见：<https://docs.pyrogram.org/topics/text-formatting#html-style>
- 在内容尾部，使用一行 6 个 `+` 号作为分隔线，来区分正文与按钮部分。在分隔线后方，每行都将代表一个按钮配置：
    - 对于每个按钮配置，请使用双竖线 `||` 分隔按钮文字（前）和按钮链接（后），最多可设置共 6 个按钮。
    - 「按钮文字」不要超过 64 个字节长度
    - 「按钮链接」可使用「关键词编号」替代。用户点击按钮后，将发送预设的关键词中的回复内容。
    - 「按钮链接」可以使用 `$pinned_message` 替代，代表置顶消息的链接。请注意：机器人不会将绑定频道的置顶消息当作置顶消息，也请在使用 `$pinned_message` 前，确保您重新置顶了待置顶的消息，这样机器人才会记录该置顶消息的 ID。
- `$mention_id`：此代号将自动被替换为用户的 ID 并 @ 该用户。
- `$mention_name`：此代号将自动被替换为用户昵称 并 @ 该用户。
- `$code_id`：代号将自动被替换为用户的 ID。
- `$code_name`：此代号将自动被替换为用户的昵称。
- `$destruct_time`：此代号将被自动替换为回复消息的自毁时间（单位为秒）。
- `$mention_admins`：此代号将被自动替换为对群组所有管理员的 @ （以不可见字符）。
- `$evidence_link`：此代号将被自动替换为证据链接，仅在触发行为中包含 `delete`、`kick`、`ban*`、`restrict` 时有效。

**其他可选设置区域：** 此部分为选填项，如果不填写、不设置，则会采取默认配置。但不可跳行配置，即：如果**只想配置第二行**，则第一行同样不可忽略，不过此时可以忽略第三行、第四行。

- 第一行，设置关键词的匹配模式，默认为 `include`，并且大小写不敏感，如需指定多个模式，请将模式代号以空格分隔，可选的模式有：
    - `include`：包含匹配。
    - `exact`：全匹配。
    - `case`：大小写敏感。
    - `caption`：仅匹配媒体附文
    - `name`：仅匹配名称（用户名、消息转发来源名）。
    - `join`：仅匹配用户入群消息。
    - `forward`：仅匹配被转发的消息。
    - `pure`：去除名称中的干扰字符。
    - `regex`：使用正则匹配模式，语法请参照 Google RE2 的 [Wiki](https://github.com/google/re2/wiki/Syntax)。
    - 请注意，`include`，`exact`，和 `regex` 模式互斥；`regex` 和 `case` 模式互斥；`caption` 与 `name` / `join` 模式互斥；`join` 和 `forward` 模式互斥。
- 第二行，设置关键词触发后应该执行的操作，默认为 `reply`，如需指定多个操作，请将操作代号以空格分隔，可选的操作有：
    - `reply`：回复预设内容。
    - `delete`：删除触发的消息。
    - `kick`：移除触发的用户。
    - `ban`：封禁触发的用户。
    - `ban-n`：封禁用户 n 秒，n 为 3 位至 8 位的整数，例如 `ban-100`。
    - `restrict`：禁言触发的用户。
    - `restrict-n`：禁言用户 n 秒，n 为 3 位至 8 位的整数，例如 `restrict-100`。
    - 请注意，`kick`、`ban*`、`restrict*` 操作互斥。
- 第三行，设置关键词针对的对象，默认为 `all`，可选的对象有：
    - `member`：除管理员外的群组成员。
    - `admin`：群组管理员。
    - `all`：全部成员。
    - 请注意，您只能指定一类对象。
- 第四行，设置关键词回复的自毁时间，默认为 300 秒：
    - 3 位至 5 位的整数，例如 `180`。

> 示例：
>
> ```bash
> /add 关键词1 || 关键词2
> +++
> 回复的文字内容
> ++++++
> 按钮文字1 || google.com
> 按钮文字2 || twitter.com
> +++
> include case
> +++
> reply restrict-100
> +++
> all
> +++
> 100
> ```
>
> *添加关键词：*
>
> ![添加问题](/images/tip/kws-add.png)

如图所示，若添加成功，则机器人将回复关键词简述，消息下方的按钮仅供效果预览。

{{< hint info >}}
注意：

对于群组管理员，机器人要求管理员「全匹配」关键词、并以「回复某条消息」的方式才能触发。

这是因为机器人默认管理员已经熟知本群所设置的关键词，欲发送关键词回复消息时，应是有主动意图的触发。

在此情况下，机器人将回收管理员的消息，并将预设内容回复给管理员所回复的对象。

您可以通过开启「平等模式」来取消对管理员的关键词触发条件的约束。
{{< /hint >}}

---

### 编辑已有关键词

编辑关键词遵从的格式与添加关键词类似，命令为 `/edit`，`/edit` 后要附加关键词编号。例如：

```bash
/edit 关键词编号
关键词甲 || 关键词乙
+++
这是一个简单、没有按钮的回复，可选配置均会采取默认配置。
```

> *编辑关键词：*
>
> ![编辑关键词](/images/tip/kws-edit.png)

群组选择编辑关键词而不是删除关键词，是为了可保留该关键词的统计数据。

---

### 删除已有关键词

删除关键词的命令为 `/remove`，后跟关键词编号，例如：`/remove 关键词编号`

> *删除关键词：*
>
> ![删除关键词](/images/tip/kws-remove.png)

除使用 `/remove` 外，还可使用 `/rm`，效果相同。

---

### 显示所有关键词

显示关键词的命令为：`/show`

> *显示所有关键词：*
>
> ![显示所有关键词](/images/tip/kws-show.png)

如图，将显示该关键词的详情，和在群组中的总触发次数、当日触发次数。

当关键词数量大于 5 时，将自动以 TXT 文件的形式发送报告。如需手动要求以文件形式显示，则发送：`/show file`

> *以 TXT 文件形式显示所有关键词：*
>
> ![以 TXT 文件形式显示所有关键词](/images/tip/kws-show-file.png)

---

### 清空所有关键词

{{< hint danger >}}
执行此命令后，将清除该群组所有设置的关键词，且无法撤回操作，请谨慎操作。在清空前，机器人会将现有配置以 JSON 文件的形式发送给操作者，以供不时之需。
{{< /hint >}}

```bash
/clear yes
```

---

## 绑定入群频道

机器人可以绑定一个入群频道，它将在入群频道中发送一条带按钮的消息，按钮将指向定时刷新的群组链接。

首先将 TIP 机器人拉入一个频道中，赋予以下权限：

> *PERMISSONS：*
>
> ![PERMISSONS](/images/tip/channel_permissions.png)

然后将该频道的任意一条消息，转发到所需绑定的群组中。接着，管理员使用 `/channel` 命令在群内回复刚刚转发的频道消息。即可成功绑定入群频道。

管理员可以更改按钮文字和消息提示：

```bash
/channel text 消息提示
```

```bash
/channel button 按钮文字
```

频道中群组入口的示例如下：

> *群组入口示例：*
>
> ![群组入口示例](/images/tip/channel_example.png)

临时关闭入群链接：

```bash
/close 原因（可选）
```

> *关闭入群通道：*
>
> ![关闭入群通道](/images/tip/channel_close.png)

重新开启入群链接：

```bash
/open
```

重新发送入群链接消息：

```bash
/resend
```

---

## 实用命令

以下介绍本机器人可响应的文字命令。

---

### 群组管理员

- `/hold`：以此命令回复某消息，将置顶该消息，并保持该置顶，防止频道消息替代该置顶。

### SCP-079-TEST 中的成员

- `/restart tip`：重启 TIP 机器人程序
- `/update tip`：更新 TIP 机器人程序
- `/version tip`：检查 TIP 机器人版本信息

---

## 问与答

常见问题汇总。

---

**Q：暂无**

A：待添加

