---
title: AVATAR
summary: 介绍 SCP-079-AVATAR 的使用方法
type: docs
---

# AVATAR

本文介绍如何使用 SCP-079-AVATAR 的机器人实例。

---

## 运作流程

以下介绍机器人的工作流程，在进行使用和设置前，建议您了解此流程。

---

### 加入群组

此机器人不接受任何群组的使用申请，群组也无法对此机器人进行设置，服务托管者自行决定此机器人加入哪些群组中。

AVATAR 应加入成员人数较多的群组，其加入的群组推荐为 NOSPAM 机器人所在的群组，但不可加入 NOSPAM 所在的全部群组，避免机器人的真实身份被轻易识别。

同时，我们建议 AVATAR 只加入管理员较为活跃的群组，以群组的管理员能够及时处理广告和举报、及时干预群组内的异常现象为宜。这样是为了保证由 AVATAR 自动生成的全局白名单具有一定的可靠性。

### 分析头像

当用户加入群组时，AVATAR 会检查是否已向 NOSPAM 分享过此用户当前的头像：如已分享过，则不做操作；如未分享，则通过 EXCHANGE 频道向 NOSPAM 发送此用户当前的头像，以供分析。

### 生成白名单

通过 AVATAR 加入的群组建立受信用户列表。每日更新。

用户加入白名单的条件：

- 非黑名单用户
- 非受追踪的用户
- 评分不大于 1.2
- 无来自 NOFLOOD 和 WARN 的评分
- 未被 WARN 移除或封禁
- 加入群组超过一定时间
- 在自定义时段内的累计 “有效发言” 超过特定条数
- 有效发言：消息中包含的文本长度（不计 emoji 和部分字符）大于特定值，主动或被动删除的发言均算为无效发言
- 次日，该用户在自定义时间点仍为群组成员，并且未被管理员限制发言

依 `config.ini` 文件中的定义，添加白名单的过程可这样描述：

> AVATAR 将在每日的 `time_check` 点生成新的白名单用户列表。
>
> 在 `time_check` 点之前，若用户在候选列表中，且仍为群组成员未被限制，则被加入白名单中。
>
> 在 `time_check` 点之前，若用户不在候选列表中，但用户在 `time_begin` 到 `time_end` 这一时间段内，发送的有效消息条数超过 `limit_message` 条，则用户会被加入到候选列表中，待次日的 `time_check` 点判断最终是否应将其加入到白名单中。

白名单可作为操作等级的参考。不同机器人根据实际情况做不同的对待。例如白名单用户不会被各机器人操作升级，NOSPAM 的检查相对宽松，而 WATCH 则有可能因为白名单而不对用户进行追踪处理。

---

## 实用命令

以下介绍本机器人可响应的文字命令。

---

### SCP-079-TEST 中的成员

- `/version`：通过 HIDE 间接检查机器人版本

---

## 问与答

常见问题汇总。

---

**Q：如何查询自己是否在白名单中？**

A：出于防 spam 的考虑，我们不对项目工作组以外的用户开放查询白名单的方式。

**Q：谁能控制白名单的添加？**

A：机器人是根据预设条件自动生成白名单的，即使是项目工作组内的管理员也无法手动添加具体的白名单用户。

**Q：谁能控制白名单的移除？**

A：群组的管理员通过 WARN 封禁或移除某个白名单用户时，该用户将被从白名单中移除，但不影响其在每月数据重置后再次被收录进白名单的可能。项目工作组成员通过 MANAGE 也可以移除某个用户的白名单，目前不会影响其今后被再次收录的可能性。当用户评分大于 1.8 时，也将被从白名单中自动移除。
